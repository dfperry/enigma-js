<!DOCTYPE html>
<html>
  <head>
    <title>ENIGMA</title>
    <link rel="stylesheet" type="text/css" href="css/enigma.css" />
    <link rel="stylesheet" type="text/css" href="js/vendor/jquery-ui/jquery-ui.min.css" />

  </head>
  <body>

    <div class="enigma">
      <!--<div class="model component">-->
        <!--Presets <select data-bind="value: selectedModel, options: models"></select>-->
        <!--<div class="panel">-->
          <!--Reflectors-->
        <!--</div>-->
        <!--<div class="panel">-->
          <!--Rotors-->
        <!--</div>-->
        <!--<div class="panel">-->
          <!--Stators-->
        <!--</div>-->
      <!--</div>-->
      <div class="wheels component" data-bind="with: enigma">
        <span data-bind="
          template:{
            name: 'wheel',
            data: selectedReflector
          }" ></span>

        <div class="rotors" data-bind="sortable: {template: 'wheel', data: selectedRotors}"></div>

        <span data-bind="
          template:{
            name: 'wheel',
            data: selectedStator
          }" ></span>

      </div>
      <div class="plugboard component" data-bind="with: enigma.plugboard">
        Connections
        <div>
          <input data-bind="value: newConnection().left" />
          <input data-bind="value: newConnection().right" />
          <button data-bind="click: addConnection">Add </button>
        </div>
        <div data-bind="foreach: connections">
          <div class="connection">
            <span data-bind="text: left"></span> -
            <span data-bind="text: right"></span>
            <button data-bind="click: $parent.removeConnection">X</button>
          </div>
        </div>
      </div>
      <div class="io component">
        <span class="panel">Input <br/>
          <textarea class="input" data-bind="textInput: input"></textarea><br/>
          <label><input type="checkbox" data-bind="checked: preserveWhitespace"/>Preserve Whitespace</label><br/>
        </span>
        <span class="panel">Output <br/>
          <span class="output" data-bind="text: output"></span>
        </span>
      </div>


    </div>

  </body>

  <script type="text/html" id="wheel">
    <div class="wheel">
      <div class="info">
        <div data-bind="text: type"></div>
        <div data-bind="text: name"></div>
        <div data-bind="text: model"></div>
        <div data-bind="text: turnoverPositions"></div>
      </div>
      <div class="config">
        Init: <input class="init" data-bind="value: initialPosition"/>
      </div>
      <div class="status">
        <div data-bind="text: next"></div>
        <div class="current" data-bind="text: current"></div>
        <div data-bind="text: previous"></div>
      </div>
    </div>

  </script>
  <!-- include scripts -->
  <script type="text/javascript" src="js/vendor/jquery/jquery-2.1.4.min.js"></script>
  <script type="text/javascript" src="js/vendor/jquery-ui/jquery-ui.min.js"></script>

  <script type="text/javascript" src="js/vendor/knockout/knockout-3.2.0.js" ></script>
  <script type="text/javascript" src="js/vendor/knockout/knockout-sortable-0.11.0.min.js"></script>
  <script type="text/javascript" src="js/vendor/knockout/knockout-postbox-0.4.2-min.js"></script>
  <script type="text/javascript" src="js/vendor/knockout/knockout.mapping-2.4.1.js"></script>

  <script type="text/javascript" src="js/app/enigma/utilities.js"></script>
  <script type="text/javascript" src="js/app/enigma/components/Plugboard.js"></script>
  <script type="text/javascript" src="js/app/enigma/components/Rotor.js"></script>
  <script type="text/javascript" src="js/app/enigma/components/Reflector.js"></script>
  <script type="text/javascript" src="js/app/enigma/components/Stator.js"></script>
  <script type="text/javascript" src="js/app/enigma/config.js"></script>
  <script type="text/javascript" src="js/app/enigma/Enigma.js"></script>
  <script type="text/javascript" src="js/app/AppVM.js"></script>

  <script type="text/javascript">

    appVM = new AppVM();

    appVM.init();

    ko.applyBindings(appVM);

  </script>
</html>

